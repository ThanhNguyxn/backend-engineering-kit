# Sourcegraph Cody Instructions

> For Sourcegraph Cody AI
> Generated by Backend Engineering Kit (bek)

## Project Context

This project uses Backend Engineering Kit patterns for production-grade backend code.

## Codebase Understanding

When analyzing this codebase:
- Check `.backend-kit/` for local patterns and checklists
- Reference `docs/` for project documentation
- Use `bek search` to find relevant patterns

## Workflow

### 1. Parse
Identify task scope:
- api, database, security, reliability, observability

### 2. Search
```bash
bek search "<query>" --scope <scope>
```

### 3. Apply
Follow pattern's Solution section with:
- Exact code structure
- Error handling
- Logging
- Validation

### 4. Validate
```bash
bek gate --checklist <checklist-id>
```

## Code Standards

### Error Format
```json
{
  "error": {
    "code": "ERROR_CODE",
    "message": "Description",
    "requestId": "uuid"
  }
}
```

### Logging
```json
{
  "level": "info",
  "correlationId": "id",
  "message": "Event",
  "timestamp": "ISO8601"
}
```

## Repository Context

Key directories:
- `src/` - Application code
- `tests/` - Test files
- `.backend-kit/` - BEK patterns/checklists

## Multi-Repo Notes

When working across repositories:
- Apply same BEK patterns consistently
- Use correlation IDs for cross-service tracing
- Follow shared error format
