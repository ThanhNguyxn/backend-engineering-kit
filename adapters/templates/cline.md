# Cline AI Rules

> Place in `.clinerules` at project root
> Generated by Backend Engineering Kit (bek)

## Project Brief

This is a production backend project following BEK patterns.
Always reference the knowledge base before implementing features.

## Workflow Rules

### Before Implementation
1. Identify the task scope (api, database, security, reliability, observability)
2. Search for relevant patterns: `bek search "<feature>" --scope <scope>`
3. Read the matched pattern completely before coding
4. Follow the pattern's Solution section step-by-step

### During Implementation
- Apply the exact code structure from the pattern
- Include all error handling as specified
- Add structured logging at key points
- Use the pattern's checklist for self-review

### After Implementation
- Run the appropriate quality gate: `bek gate --checklist <id>`
- Verify all checklist items pass
- Document any deviations from the pattern

## Coding Standards

### Error Handling
```json
{
  "error": {
    "code": "SCREAMING_SNAKE_CASE",
    "message": "Human readable message",
    "requestId": "correlation-id"
  }
}
```

### Logging Format
```json
{
  "level": "info|warn|error",
  "message": "Event description",
  "correlationId": "request-id",
  "timestamp": "ISO8601"
}
```

### Database Queries
- Always use parameterized queries
- Index columns used in WHERE/JOIN/ORDER BY
- Include created_at, updated_at, deleted_at

## Available Patterns

Run `bek search "<query>"` to find patterns for:
- API error handling and validation
- Database indexing and migrations
- Security rate limiting and auth
- Reliability timeouts and retries
- Observability logging and metrics

## Memory Bank Structure

If using Memory Bank, create these files:
- `projectbrief.md` - Project overview and goals
- `activeContext.md` - Current task context
- `systemPatterns.md` - Applied BEK patterns
- `techContext.md` - Tech stack details
- `progress.md` - Completed work log
