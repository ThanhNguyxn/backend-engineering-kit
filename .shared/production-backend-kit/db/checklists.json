[
  {
    "id": "checklist-api-review",
    "title": "API Review Checklist",
    "tags": [
      "api",
      "rest",
      "review",
      "quality",
      "design"
    ],
    "level": "intermediate",
    "stacks": [
      "all"
    ],
    "scope": "api",
    "maturity": "stable",
    "works_with": [
      "all"
    ],
    "path": "D:/Code/backend-engineering-kit/.shared/production-backend-kit/checklists/checklist.api-review.md",
    "type": "checklist",
    "sections": [],
    "checklist": [],
    "sources": [],
    "rawContent": "\r\n# API Review Checklist\r\n\r\nUse this checklist when reviewing API endpoints before deployment.\r\n\r\n---\r\n\r\n## üéØ Resource Design & Naming\r\n\r\n### URL Structure\r\n- [ ] URLs use nouns, not verbs (`/users`, not `/getUsers`)\r\n- [ ] Collection names are plural (`/users`, `/orders`)\r\n- [ ] Resource names are lowercase with hyphens (`/user-profiles`)\r\n- [ ] Nested resources max 2 levels (`/users/{id}/orders`)\r\n- [ ] Actions use sub-resources (`/orders/{id}/actions/cancel`)\r\n\r\n### HTTP Methods\r\n- [ ] GET - Read (safe, idempotent)\r\n- [ ] POST - Create or complex operations\r\n- [ ] PUT - Full update (idempotent)\r\n- [ ] PATCH - Partial update\r\n- [ ] DELETE - Remove (idempotent)\r\n\r\n### Resource Identifiers\r\n- [ ] IDs are URL-safe (alphanumeric, hyphens)\r\n- [ ] Prefer UUIDs for external IDs (security)\r\n- [ ] Consistent ID format across resources\r\n- [ ] Self-link included in responses (HATEOAS optional)\r\n\r\n### Versioning\r\n- [ ] Version in URL path (`/v1/users`) OR header (`Accept-Version`)\r\n- [ ] One versioning strategy used consistently\r\n- [ ] Breaking changes require new version\r\n- [ ] Deprecation timeline documented\r\n\r\n---\r\n\r\n## üì• Request Handling\r\n\r\n### Input Validation\r\n- [ ] Request body schema defined (JSON Schema, OpenAPI)\r\n- [ ] Required vs optional fields documented\r\n- [ ] Validation runs before business logic\r\n- [ ] Appropriate error messages for validation failures\r\n- [ ] Type coercion disabled (strict types)\r\n\r\n### Content Handling\r\n- [ ] `Content-Type: application/json` required for bodies\r\n- [ ] Charset UTF-8 enforced\r\n- [ ] Request size limits configured\r\n- [ ] Nested depth limits enforced\r\n- [ ] Array length limits enforced\r\n\r\n### File Uploads\r\n- [ ] File type validated (magic bytes, not extension)\r\n- [ ] File size limited\r\n- [ ] Filename sanitized\r\n- [ ] Uploaded to secure storage (not web-accessible)\r\n- [ ] Virus scanning (if applicable)\r\n\r\n### Query Parameters\r\n- [ ] Consistent casing (snake_case or camelCase)\r\n- [ ] Boolean values standardized (`true`/`false`)\r\n- [ ] Unknown parameters ignored or rejected (documented)\r\n- [ ] Array parameters use consistent format (`?id=1&id=2` or `?ids=1,2`)\r\n\r\n---\r\n\r\n## üì§ Response Design\r\n\r\n### Response Structure\r\n```json\r\n{\r\n  \"data\": { ... },\r\n  \"meta\": {\r\n    \"requestId\": \"abc-123\",\r\n    \"timestamp\": \"2024-01-15T10:30:00Z\"\r\n  }\r\n}\r\n```\r\n\r\n### Success Responses\r\n- [ ] 200 OK - Successful GET, PUT, PATCH\r\n- [ ] 201 Created - Successful POST (include Location header)\r\n- [ ] 204 No Content - Successful DELETE\r\n- [ ] 202 Accepted - Async operation started\r\n\r\n### Response Consistency\r\n- [ ] Empty arrays return `[]`, not `null`\r\n- [ ] Absent optional fields omitted (not `null`)\r\n- [ ] Dates in ISO 8601 (`2024-01-15T10:30:00Z`)\r\n- [ ] Money as smallest unit (cents) or string with currency\r\n- [ ] Consistent property naming (camelCase or snake_case)\r\n\r\n### Response Headers\r\n- [ ] `Content-Type: application/json`\r\n- [ ] `X-Request-Id` for correlation\r\n- [ ] Cache headers appropriate (`Cache-Control`, `ETag`)\r\n- [ ] `Location` header on 201 Created\r\n\r\n---\r\n\r\n## ‚ùå Error Handling\r\n\r\n### Error Response Structure (RFC 7807)\r\n```json\r\n{\r\n  \"type\": \"https://api.example.com/errors/validation-error\",\r\n  \"title\": \"Validation Failed\",\r\n  \"status\": 400,\r\n  \"detail\": \"Email format is invalid\",\r\n  \"instance\": \"/users/123\",\r\n  \"errors\": [\r\n    { \"field\": \"email\", \"message\": \"Invalid email format\" }\r\n  ],\r\n  \"traceId\": \"abc-123\"\r\n}\r\n```\r\n\r\n### Status Codes\r\n| Code | Usage |\r\n|------|-------|\r\n| 400 | Bad Request - Validation failed |\r\n| 401 | Unauthorized - No/invalid authentication |\r\n| 403 | Forbidden - No permission |\r\n| 404 | Not Found - Resource doesn't exist |\r\n| 409 | Conflict - Resource state conflict |\r\n| 422 | Unprocessable - Semantic validation error |\r\n| 429 | Too Many Requests - Rate limited |\r\n| 500 | Internal Error - Server fault |\r\n| 503 | Service Unavailable - Temporary outage |\r\n\r\n### Error Checklist\r\n- [ ] Error format consistent across all endpoints\r\n- [ ] Error messages don't leak sensitive info\r\n- [ ] Validation errors list all fields\r\n- [ ] Error type URIs resolvable (optional but nice)\r\n- [ ] Machine-readable error codes for clients\r\n\r\n---\r\n\r\n## üìä Pagination\r\n\r\n### Offset Pagination (simple, has issues at scale)\r\n```\r\nGET /users?limit=20&offset=40\r\n```\r\n- [ ] Default limit set (e.g., 20)\r\n- [ ] Maximum limit enforced (e.g., 100)\r\n- [ ] Total count provided (careful with large tables)\r\n\r\n### Cursor Pagination (recommended for large datasets)\r\n```\r\nGET /users?limit=20&cursor=eyJpZCI6MTAwfQ==\r\n```\r\n- [ ] Cursor is opaque (encoded)\r\n- [ ] Next cursor in response\r\n- [ ] Consistent ordering (e.g., id DESC)\r\n\r\n### Pagination Response\r\n```json\r\n{\r\n  \"data\": [...],\r\n  \"pagination\": {\r\n    \"limit\": 20,\r\n    \"hasMore\": true,\r\n    \"nextCursor\": \"eyJpZCI6ODB9\"\r\n  }\r\n}\r\n```\r\n\r\n---\r\n\r\n## üîç Filtering & Sorting\r\n\r\n### Filtering\r\n- [ ] Filters on indexed columns\r\n- [ ] Filter syntax documented\r\n- [ ] Complex filters limited (prevent query bombing)\r\n- [ ] Example: `?status=active&created_after=2024-01-01`\r\n\r\n### Sorting\r\n- [ ] Sort syntax consistent (`?sort=created_at` or `?sort=-created_at`)\r\n- [ ] Descending with `-` prefix or `order=desc`\r\n- [ ] Sort on indexed columns only\r\n- [ ] Default sort order documented\r\n\r\n### Field Selection\r\n- [ ] Sparse fieldsets supported (`?fields=id,name,email`)\r\n- [ ] Related resource expansion (`?include=orders`)\r\n- [ ] Depth limit for expansions\r\n\r\n---\r\n\r\n## üîê Security\r\n\r\n### Authentication\r\n- [ ] Auth required for protected endpoints\r\n- [ ] Auth mechanism documented (Bearer, API Key)\r\n- [ ] 401 for missing/invalid auth\r\n- [ ] 403 for insufficient permissions\r\n\r\n### Authorization\r\n- [ ] Resource-level permissions checked\r\n- [ ] IDOR prevention (user can only access own resources)\r\n- [ ] Admin endpoints protected\r\n\r\n### Rate Limiting\r\n- [ ] Rate limits configured\r\n- [ ] `X-RateLimit-*` headers returned\r\n- [ ] 429 response with `Retry-After` header\r\n- [ ] Different limits per endpoint sensitivity\r\n\r\n### Input Security\r\n- [ ] SQL injection prevented (parameterized queries)\r\n- [ ] Mass assignment prevented (allowlist fields)\r\n- [ ] Path traversal prevented\r\n- [ ] Request size limits configured\r\n\r\n---\r\n\r\n## ‚ö° Performance\r\n\r\n### Efficiency\r\n- [ ] N+1 queries prevented (eager loading)\r\n- [ ] Response size reasonable\r\n- [ ] Expensive operations async (202 Accepted)\r\n- [ ] Batch endpoints for multiple operations\r\n\r\n### Caching\r\n- [ ] `Cache-Control` headers appropriate\r\n- [ ] `ETag` / `Last-Modified` for conditional requests\r\n- [ ] 304 Not Modified supported\r\n- [ ] Vary header for content negotiation\r\n\r\n### Idempotency\r\n- [ ] POST endpoints accept `Idempotency-Key` header\r\n- [ ] PUT/DELETE are naturally idempotent\r\n- [ ] Retry-safe operations documented\r\n\r\n---\r\n\r\n## üìù Documentation\r\n\r\n### OpenAPI/Swagger\r\n- [ ] Spec file exists and up-to-date\r\n- [ ] All endpoints documented\r\n- [ ] All request/response schemas defined\r\n- [ ] Examples provided for all operations\r\n- [ ] Error responses documented\r\n\r\n### Developer Experience\r\n- [ ] Authentication guide\r\n- [ ] Quickstart example\r\n- [ ] Error handling guide\r\n- [ ] Rate limiting documentation\r\n- [ ] Changelog maintained\r\n\r\n---\r\n\r\n## ‚úÖ Review Summary\r\n\r\n| Category | Status | Reviewer | Notes |\r\n|----------|--------|----------|-------|\r\n| Resource Design | [ ] | | |\r\n| Request Handling | [ ] | | |\r\n| Response Design | [ ] | | |\r\n| Error Handling | [ ] | | |\r\n| Pagination | [ ] | | |\r\n| Security | [ ] | | |\r\n| Performance | [ ] | | |\r\n| Documentation | [ ] | | |\r\n\r\n---\r\n\r\n## Sign-Off\r\n\r\n| Role | Name | Date |\r\n|------|------|------|\r\n| API Reviewer | | |\r\n| Security Review | | |\r\n\r\n---\r\n\r\n## Sources\r\n\r\n- [Google API Design Guide](https://cloud.google.com/apis/design)\r\n- [Microsoft REST API Guidelines](https://github.com/microsoft/api-guidelines)\r\n- [Zalando RESTful API Guidelines](https://opensource.zalando.com/restful-api-guidelines/)\r\n- [JSON:API Specification](https://jsonapi.org/)\r\n- [RFC 7807 - Problem Details for HTTP APIs](https://www.rfc-editor.org/rfc/rfc7807)\r\n"
  },
  {
    "id": "checklist-db-review",
    "title": "Database Review Checklist",
    "tags": [
      "database",
      "schema",
      "performance",
      "review",
      "postgres",
      "mysql"
    ],
    "level": "intermediate",
    "stacks": [
      "all"
    ],
    "scope": "database",
    "maturity": "stable",
    "works_with": [
      "all"
    ],
    "path": "D:/Code/backend-engineering-kit/.shared/production-backend-kit/checklists/checklist.db-review.md",
    "type": "checklist",
    "sections": [],
    "checklist": [],
    "sources": [],
    "rawContent": "\r\n# Database Review Checklist\r\n\r\nUse this checklist when reviewing database changes before deployment.\r\n\r\n---\r\n\r\n## üóÇÔ∏è Schema Design\r\n\r\n### Primary Keys\r\n- [ ] Every table has a primary key\r\n- [ ] PK type appropriate for scale\r\n  - UUID: Distributed, security (no enumeration)\r\n  - BIGINT: Performance, sequential\r\n  - ULID: Sortable + distributed\r\n- [ ] PK not used as business identifier (separate column)\r\n\r\n### Foreign Keys & Relationships\r\n- [ ] Foreign keys defined with constraints\r\n- [ ] ON DELETE action appropriate:\r\n  - CASCADE: Child deleted with parent\r\n  - SET NULL: Child orphaned (nullable FK)\r\n  - RESTRICT: Prevent parent deletion\r\n  - NO ACTION: Check deferred to transaction end\r\n- [ ] Circular references avoided or documented\r\n- [ ] Junction tables for many-to-many\r\n\r\n### Column Design\r\n- [ ] NOT NULL on required columns\r\n- [ ] Appropriate default values\r\n- [ ] Column types match expected data:\r\n  - Avoid `TEXT` for bounded strings\r\n  - Use `DECIMAL` for money (never `FLOAT`)\r\n  - Use `TIMESTAMPTZ` for time (with timezone)\r\n  - Use `JSONB` not `JSON` (PostgreSQL)\r\n- [ ] Character set UTF-8 (utf8mb4 for MySQL)\r\n\r\n### Constraints\r\n- [ ] Unique constraints on business keys\r\n- [ ] Check constraints for enums/ranges\r\n- [ ] Exclusion constraints for ranges (PostgreSQL)\r\n- [ ] Constraint names meaningful (for error messages)\r\n\r\n```sql\r\n-- Good constraint naming\r\nCONSTRAINT orders_status_check \r\n  CHECK (status IN ('pending', 'processing', 'completed', 'cancelled'))\r\n```\r\n\r\n### Standard Columns\r\nConsider these for all tables:\r\n- [ ] `id` - Primary key\r\n- [ ] `created_at` - TIMESTAMPTZ DEFAULT NOW()\r\n- [ ] `updated_at` - TIMESTAMPTZ (trigger-maintained)\r\n- [ ] `version` - For optimistic locking (if needed)\r\n- [ ] `deleted_at` - For soft delete (if needed)\r\n\r\n---\r\n\r\n## üìä Indexing Strategy\r\n\r\n### Index Essentials\r\n- [ ] Foreign key columns indexed (prevents full scans on DELETE)\r\n- [ ] Columns in WHERE clauses indexed\r\n- [ ] Columns in ORDER BY indexed\r\n- [ ] Columns in JOIN conditions indexed\r\n\r\n### Composite Indexes\r\n- [ ] Column order matches query patterns\r\n- [ ] Most selective column first (usually)\r\n- [ ] Equality columns before range columns\r\n- [ ] Covering indexes for read-heavy queries\r\n\r\n```sql\r\n-- Query: WHERE tenant_id = ? AND status = ? ORDER BY created_at DESC\r\nCREATE INDEX idx_orders_tenant_status_created \r\n  ON orders (tenant_id, status, created_at DESC);\r\n```\r\n\r\n### Index Anti-Patterns\r\n- [ ] No duplicate indexes\r\n- [ ] No unused indexes (check `pg_stat_user_indexes`)\r\n- [ ] No indexes on low-cardinality columns (unless composite)\r\n- [ ] No over-indexing (hurts write performance)\r\n\r\n### Index Types (PostgreSQL)\r\n- [ ] B-Tree: Default, equality and range\r\n- [ ] Hash: Equality only (rarely better than B-Tree)\r\n- [ ] GIN: Arrays, JSONB, full-text\r\n- [ ] GiST: Geometric, range types\r\n- [ ] BRIN: Very large, naturally ordered tables\r\n\r\n### Query Analysis\r\n- [ ] EXPLAIN ANALYZE run on critical queries\r\n- [ ] No sequential scans on large tables\r\n- [ ] Index-only scans where possible\r\n- [ ] Join strategies appropriate (nested loop, hash, merge)\r\n\r\n---\r\n\r\n## üîÑ Migration Safety\r\n\r\n### Non-Destructive Changes\r\n- [ ] Prefer ADD over DROP (add columns, don't remove)\r\n- [ ] ADD column with DEFAULT is safe in PG 11+\r\n- [ ] Rename via new column + deprecation period\r\n- [ ] Drop columns only after code updated\r\n\r\n### Safe Migration Patterns\r\n| Change | Safe Approach |\r\n|--------|---------------|\r\n| Add column | ADD with NULL or DEFAULT |\r\n| Add NOT NULL | ADD NULL ‚Üí backfill ‚Üí ADD NOT NULL |\r\n| Rename column | Add new ‚Üí migrate ‚Üí drop old |\r\n| Change type | Add new ‚Üí migrate ‚Üí drop old |\r\n| Add index | CREATE INDEX CONCURRENTLY |\r\n| Add FK | ADD CONSTRAINT NOT VALID ‚Üí VALIDATE |\r\n\r\n### Migration Checklist\r\n- [ ] Both UP and DOWN scripts exist\r\n- [ ] Tested on production-like data volume\r\n- [ ] Large data updates batched\r\n- [ ] Lock timeout set for migration\r\n- [ ] Indexes created CONCURRENTLY\r\n\r\n```sql\r\n-- Safe index creation (PostgreSQL)\r\nSET lock_timeout = '10s';\r\nCREATE INDEX CONCURRENTLY idx_users_email ON users (email);\r\n\r\n-- Safe NOT NULL addition\r\nALTER TABLE users ALTER COLUMN name SET NOT NULL;\r\n-- Only safe if column has no NULLs!\r\n```\r\n\r\n### Rollback Plan\r\n- [ ] Rollback tested\r\n- [ ] Backward-compatible changes (new code + old schema works)\r\n- [ ] Data loss prevention verified\r\n\r\n---\r\n\r\n## ‚ö° Query Performance\r\n\r\n### Query Basics\r\n- [ ] No SELECT * (explicit columns)\r\n- [ ] LIMIT on unbounded queries\r\n- [ ] Appropriate JOIN type (INNER vs LEFT vs EXISTS)\r\n- [ ] Subqueries vs JOINs evaluated\r\n\r\n### N+1 Prevention\r\n- [ ] Eager loading for related data\r\n- [ ] Batch loading (DataLoader pattern)\r\n- [ ] No queries in loops\r\n\r\n```sql\r\n-- Bad: N+1\r\nSELECT * FROM users;\r\n-- Then for each user:\r\nSELECT * FROM orders WHERE user_id = ?;\r\n\r\n-- Good: Single query with JOIN or IN\r\nSELECT * FROM orders WHERE user_id IN (1, 2, 3, ...);\r\n```\r\n\r\n### Pagination\r\n- [ ] OFFSET pagination only for small datasets\r\n- [ ] Keyset pagination for large datasets\r\n- [ ] Total count separate or estimated\r\n\r\n```sql\r\n-- Keyset pagination (fast)\r\nSELECT * FROM orders \r\nWHERE (created_at, id) < ($last_created_at, $last_id)\r\nORDER BY created_at DESC, id DESC\r\nLIMIT 20;\r\n```\r\n\r\n### Query Timeouts\r\n- [ ] Statement timeout configured\r\n- [ ] Lock timeout configured\r\n- [ ] Application-level timeout shorter than DB timeout\r\n\r\n```sql\r\n-- PostgreSQL session settings\r\nSET statement_timeout = '30s';\r\nSET lock_timeout = '10s';\r\n```\r\n\r\n---\r\n\r\n## üîó Connection Management\r\n\r\n### Connection Pooling\r\n- [ ] Connection pooler used (PgBouncer, RDS Proxy)\r\n- [ ] Pool size calculated:\r\n  ```\r\n  connections = ((core_count * 2) + effective_spindle_count)\r\n  ```\r\n- [ ] Max connections respected\r\n- [ ] Connection leaks prevented (always close/return)\r\n\r\n### Pool Configuration\r\n| Setting | Typical Value |\r\n|---------|---------------|\r\n| Min connections | 5-10 |\r\n| Max connections | 20-50 |\r\n| Connection timeout | 10s |\r\n| Idle timeout | 300s |\r\n| Max lifetime | 1800s |\r\n\r\n---\r\n\r\n## üîê Data Integrity\r\n\r\n### Transactions\r\n- [ ] Multi-step operations wrapped in transaction\r\n- [ ] Transaction isolation level appropriate:\r\n  - Read Committed: Default, good for most\r\n  - Repeatable Read: Consistent reads in transaction\r\n  - Serializable: Full isolation (slow)\r\n- [ ] Transactions short (no user interaction inside)\r\n- [ ] Deadlock handling (retry logic)\r\n\r\n### Concurrency Control\r\n- [ ] Optimistic locking with version column\r\n- [ ] SELECT FOR UPDATE for pessimistic locking\r\n- [ ] Advisory locks for distributed operations\r\n\r\n```sql\r\n-- Optimistic locking\r\nUPDATE orders \r\nSET status = 'shipped', version = version + 1\r\nWHERE id = $1 AND version = $2;\r\n-- Check affected rows = 1\r\n```\r\n\r\n### Audit Trail\r\n- [ ] Sensitive data changes logged\r\n- [ ] Audit log includes: who, what, when, old/new values\r\n- [ ] Audit tables append-only\r\n- [ ] Consider CDC (Change Data Capture) for scale\r\n\r\n### Soft Delete\r\n- [ ] `deleted_at` column if data recoverable\r\n- [ ] Unique constraints include deleted_at\r\n- [ ] Default scope excludes deleted\r\n- [ ] Hard delete after retention period\r\n\r\n```sql\r\n-- Unique with soft delete\r\nCREATE UNIQUE INDEX idx_users_email_active \r\n  ON users (email) WHERE deleted_at IS NULL;\r\n```\r\n\r\n---\r\n\r\n## üíæ Backup & Recovery\r\n\r\n### Backup Strategy\r\n- [ ] Automated backups configured\r\n- [ ] Point-in-time recovery enabled (WAL archiving)\r\n- [ ] Backup retention policy defined\r\n- [ ] Backups tested regularly (restore drill)\r\n- [ ] Backups encrypted\r\n\r\n### Recovery\r\n- [ ] RTO (Recovery Time Objective) documented\r\n- [ ] RPO (Recovery Point Objective) documented\r\n- [ ] Recovery procedure documented\r\n- [ ] Replica promotion tested\r\n\r\n---\r\n\r\n## üìä Monitoring\r\n\r\n### Key Metrics\r\n- [ ] Query latency (p50, p95, p99)\r\n- [ ] Connection pool utilization\r\n- [ ] Slow query logging enabled\r\n- [ ] Lock wait monitoring\r\n- [ ] Replication lag (if applicable)\r\n\r\n### PostgreSQL Stats\r\n- [ ] `pg_stat_statements` enabled\r\n- [ ] `pg_stat_user_tables` monitored (seq scans, dead tuples)\r\n- [ ] `pg_stat_user_indexes` monitored (unused indexes)\r\n- [ ] VACUUM/ANALYZE running regularly\r\n\r\n---\r\n\r\n## ‚úÖ Review Summary\r\n\r\n| Category | Status | Notes |\r\n|----------|--------|-------|\r\n| Schema Design | [ ] | |\r\n| Indexing | [ ] | |\r\n| Migrations | [ ] | |\r\n| Performance | [ ] | |\r\n| Connections | [ ] | |\r\n| Data Integrity | [ ] | |\r\n| Backup | [ ] | |\r\n\r\n---\r\n\r\n## Sign-Off\r\n\r\n| Role | Name | Date |\r\n|------|------|------|\r\n| DBA/DB Reviewer | | |\r\n| Development Lead | | |\r\n\r\n---\r\n\r\n## Sources\r\n\r\n- [PostgreSQL Performance Tips](https://www.postgresql.org/docs/current/performance-tips.html)\r\n- [Use The Index, Luke](https://use-the-index-luke.com/)\r\n- [Designing Data-Intensive Applications](https://dataintensive.net/)\r\n- [PostgreSQL Wiki - Don't Do This](https://wiki.postgresql.org/wiki/Don%27t_Do_This)\r\n- [MySQL Optimization](https://dev.mysql.com/doc/refman/8.0/en/optimization.html)\r\n- [PgBouncer Documentation](https://www.pgbouncer.org/)\r\n"
  },
  {
    "id": "checklist-multitenancy-review",
    "title": "Multi-Tenancy Review Checklist",
    "tags": [
      "checklist",
      "multitenancy",
      "security",
      "saas",
      "isolation"
    ],
    "level": "advanced",
    "stacks": [
      "all"
    ],
    "scope": "security",
    "maturity": "stable",
    "works_with": [
      "all"
    ],
    "path": "D:/Code/backend-engineering-kit/.shared/production-backend-kit/checklists/checklist.multitenancy-review.md",
    "type": "checklist",
    "sections": [],
    "checklist": [],
    "sources": [],
    "rawContent": "\r\n# Multi-Tenancy Review Checklist\r\n\r\nUse this checklist to verify your multi-tenant implementation before deployment.\r\n\r\n---\r\n\r\n## üèóÔ∏è Architecture Model\r\n\r\n### Isolation Strategy Selection\r\n| Model | Isolation | Cost | Complexity | Use Case |\r\n|-------|-----------|------|------------|----------|\r\n| Shared DB, Shared Schema | Low | $ | Low | Small SaaS, cost-sensitive |\r\n| Shared DB, Separate Schema | Medium | $$ | Medium | Medium SaaS, compliance |\r\n| Separate Database | High | $$$ | High | Enterprise, strict compliance |\r\n| Separate Infrastructure | Highest | $$$$ | Highest | Regulated industries |\r\n\r\n- [ ] Isolation model documented with justification\r\n- [ ] Model appropriate for compliance requirements\r\n- [ ] Cost/isolation tradeoff understood\r\n- [ ] Future scaling path defined\r\n\r\n---\r\n\r\n## üîç Tenant Resolution\r\n\r\n### Resolution Strategy\r\n- [ ] Single resolution method used consistently:\r\n  - [ ] Subdomain (`tenant1.example.com`)\r\n  - [ ] Path prefix (`/tenant1/api`)\r\n  - [ ] Header (`X-Tenant-ID`)\r\n  - [ ] JWT claim (`tenant_id`)\r\n  - [ ] API key lookup\r\n\r\n### Validation\r\n- [ ] Tenant resolved early in request pipeline\r\n- [ ] Tenant ID validated on every request\r\n- [ ] Invalid tenant returns 400/404 (not 500)\r\n- [ ] Missing tenant context fails safely\r\n- [ ] Tenant status checked (active, suspended, deleted)\r\n\r\n### Context\r\n- [ ] Tenant context available via middleware\r\n- [ ] Tenant ID not modifiable after resolution\r\n- [ ] Request scoped (not global state)\r\n\r\n```typescript\r\n// Example middleware\r\nconst tenantMiddleware = (req, res, next) => {\r\n  const tenantId = extractTenantId(req);\r\n  if (!tenantId || !isValidTenant(tenantId)) {\r\n    return res.status(400).json({ error: 'Invalid tenant' });\r\n  }\r\n  req.tenantId = tenantId;\r\n  asyncLocalStorage.run({ tenantId }, next);\r\n};\r\n```\r\n\r\n---\r\n\r\n## üíæ Data Isolation\r\n\r\n### Schema Design (Shared Database)\r\n- [ ] All tenant tables have `tenant_id` column\r\n- [ ] `tenant_id` is NOT NULL, no default\r\n- [ ] `tenant_id` first in composite indexes\r\n- [ ] Composite unique constraints include `tenant_id`\r\n- [ ] Foreign keys within same tenant (composite FK if needed)\r\n\r\n```sql\r\n-- Example: Composite unique constraint\r\nCREATE UNIQUE INDEX idx_orders_number_tenant \r\n  ON orders (tenant_id, order_number);\r\n```\r\n\r\n### Row Level Security (PostgreSQL)\r\n- [ ] RLS enabled on all tenant tables\r\n- [ ] Policies enforce tenant_id = current_setting('app.tenant_id')\r\n- [ ] RLS tested with multiple tenants\r\n- [ ] Superuser bypass understood and documented\r\n\r\n```sql\r\n-- RLS example\r\nALTER TABLE orders ENABLE ROW LEVEL SECURITY;\r\n\r\nCREATE POLICY tenant_isolation ON orders\r\n  USING (tenant_id = current_setting('app.tenant_id')::uuid);\r\n\r\n-- Force RLS for table owner too\r\nALTER TABLE orders FORCE ROW LEVEL SECURITY;\r\n```\r\n\r\n### Query Safety\r\n- [ ] ORM middleware enforces tenant scope automatically\r\n- [ ] JOINs include tenant_id conditions\r\n- [ ] Raw SQL queries filtered by tenant\r\n- [ ] Subqueries include tenant filter\r\n- [ ] Aggregate queries scoped to tenant\r\n\r\n### Data Separation Verification\r\n- [ ] Query analyzer confirms tenant filter on all queries\r\n- [ ] No queries bypass tenant filter\r\n- [ ] Bulk operations include tenant_id\r\n- [ ] Exports/reports scoped to tenant\r\n\r\n---\r\n\r\n## üîÑ Context Propagation\r\n\r\n### Request Context\r\n- [ ] AsyncLocalStorage (Node.js) or ThreadLocal (Java) configured\r\n- [ ] Tenant context in all log entries\r\n- [ ] Tenant context in error tracking (Sentry, etc.)\r\n- [ ] Metrics include tenant dimension\r\n\r\n### Async Operations\r\n- [ ] Background jobs preserve tenant context\r\n- [ ] Job payload includes tenant_id\r\n- [ ] Worker validates tenant before processing\r\n- [ ] Cron jobs iterate tenants explicitly\r\n\r\n```typescript\r\n// Background job example\r\ninterface TenantJob {\r\n  tenantId: string;\r\n  payload: any;\r\n}\r\n\r\nconst processJob = async (job: TenantJob) => {\r\n  await withTenantContext(job.tenantId, async () => {\r\n    // All DB operations automatically scoped\r\n  });\r\n};\r\n```\r\n\r\n### External Integrations\r\n- [ ] Webhooks validate tenant ownership\r\n- [ ] OAuth state includes tenant_id\r\n- [ ] Callbacks verify tenant context\r\n- [ ] API responses don't leak cross-tenant data\r\n\r\n---\r\n\r\n## üõ°Ô∏è Authorization\r\n\r\n### RBAC Model\r\n- [ ] Roles defined per tenant (not global)\r\n- [ ] Permissions assigned to roles\r\n- [ ] User-role assignment scoped to tenant\r\n- [ ] Same user can have different roles in different tenants\r\n\r\n```sql\r\n-- Per-tenant roles\r\nCREATE TABLE tenant_roles (\r\n  id UUID PRIMARY KEY,\r\n  tenant_id UUID NOT NULL REFERENCES tenants(id),\r\n  name VARCHAR(100) NOT NULL,\r\n  permissions JSONB NOT NULL,\r\n  UNIQUE (tenant_id, name)\r\n);\r\n\r\nCREATE TABLE user_tenant_roles (\r\n  user_id UUID NOT NULL REFERENCES users(id),\r\n  tenant_id UUID NOT NULL REFERENCES tenants(id),\r\n  role_id UUID NOT NULL REFERENCES tenant_roles(id),\r\n  PRIMARY KEY (user_id, tenant_id)\r\n);\r\n```\r\n\r\n### Access Control\r\n- [ ] Permission checks on all protected routes\r\n- [ ] Resource-level authorization (not just role)\r\n- [ ] Implicit deny (require explicit permission)\r\n- [ ] Admin users can't access other tenants\r\n- [ ] Super admin access audited\r\n\r\n### Feature Flags & Plans\r\n- [ ] Features enabled per plan/tenant\r\n- [ ] Feature checks enforced in backend (not just UI)\r\n- [ ] Graceful degradation for disabled features\r\n- [ ] Usage limits per plan enforced\r\n\r\n---\r\n\r\n## üîê Security\r\n\r\n### Isolation Validation\r\n- [ ] Penetration test for cross-tenant access\r\n- [ ] Automated tests for IDOR vulnerabilities\r\n- [ ] No tenant ID in URLs (prevents enumeration)\r\n- [ ] UUID for tenant IDs (not sequential)\r\n\r\n### Rate Limiting\r\n- [ ] Rate limits per tenant (not just per IP)\r\n- [ ] Tenant-level API quotas\r\n- [ ] Noisy neighbor protection\r\n- [ ] Fair share scheduling\r\n\r\n### API Security\r\n- [ ] API keys scoped to tenant\r\n- [ ] JWT includes tenant claim\r\n- [ ] Token validation includes tenant\r\n- [ ] Cross-tenant API access denied\r\n\r\n### Audit & Compliance\r\n- [ ] Audit log for sensitive operations\r\n- [ ] Audit includes tenant context\r\n- [ ] Cross-tenant access attempts logged and alerted\r\n- [ ] Data export per tenant (GDPR compliance)\r\n- [ ] Data deletion per tenant capability\r\n\r\n---\r\n\r\n## üí≥ Billing & Subscriptions\r\n\r\n### Stripe/Payment Integration\r\n- [ ] Stripe customer ID linked to tenant\r\n- [ ] Webhook signature verified\r\n- [ ] Webhook events processed idempotently\r\n- [ ] Event handler checks tenant_id match\r\n\r\n```typescript\r\n// Webhook idempotency\r\nconst processStripeEvent = async (event: Stripe.Event) => {\r\n  const processed = await db.stripeEvents.findUnique({ \r\n    where: { id: event.id } \r\n  });\r\n  if (processed) return; // Already handled\r\n  \r\n  await db.$transaction(async (tx) => {\r\n    await tx.stripeEvents.create({ data: { id: event.id } });\r\n    await handleEvent(event, tx);\r\n  });\r\n};\r\n```\r\n\r\n### Subscription Management\r\n- [ ] Subscription state synced to DB\r\n- [ ] Grace period for failed payments\r\n- [ ] Downgrade handling (data retention)\r\n- [ ] Cancellation workflow\r\n- [ ] Plan limits enforced in app\r\n\r\n### Usage Tracking\r\n- [ ] Metered usage tracked per tenant\r\n- [ ] Usage reported to billing system\r\n- [ ] Overage handling defined\r\n- [ ] Usage visible to tenant admins\r\n\r\n---\r\n\r\n## üß™ Testing\r\n\r\n### Unit Tests\r\n- [ ] Tests mock tenant context\r\n- [ ] Service methods tested with tenant isolation\r\n- [ ] Edge cases: no tenant, invalid tenant\r\n\r\n### Integration Tests\r\n- [ ] Tests use multiple tenants\r\n- [ ] Cross-tenant access tests exist (and fail)\r\n- [ ] RLS bypass attempts fail\r\n- [ ] Concurrent tenant operations tested\r\n\r\n```typescript\r\n// Cross-tenant test example\r\ntest('tenant A cannot access tenant B data', async () => {\r\n  const tenantA = await createTenant();\r\n  const tenantB = await createTenant();\r\n  const order = await createOrder(tenantB.id);\r\n  \r\n  setTenantContext(tenantA.id);\r\n  const result = await orderService.findById(order.id);\r\n  \r\n  expect(result).toBeNull(); // Or throw NotFoundError\r\n});\r\n```\r\n\r\n### Security Tests\r\n- [ ] Automated IDOR tests\r\n- [ ] SQL injection tests with tenant bypass attempts\r\n- [ ] Rate limit tests per tenant\r\n- [ ] API key scope tests\r\n\r\n---\r\n\r\n## üìä Monitoring & Observability\r\n\r\n### Metrics\r\n- [ ] Metrics include tenant dimension\r\n- [ ] Per-tenant latency tracking\r\n- [ ] Per-tenant error rates\r\n- [ ] Per-tenant resource usage\r\n\r\n### Alerting\r\n- [ ] Alerts for cross-tenant access attempts\r\n- [ ] Alerts for tenant-specific errors\r\n- [ ] Noisy neighbor detection\r\n- [ ] Quota breach alerts\r\n\r\n### Dashboards\r\n- [ ] Dashboard for tenant health\r\n- [ ] Usage tracking per tenant\r\n- [ ] Tenant-specific debugging capability\r\n- [ ] SLA monitoring per tenant (if applicable)\r\n\r\n### Logging\r\n- [ ] Tenant ID in all log entries\r\n- [ ] Tenant-filtered log queries\r\n- [ ] Audit log searchable by tenant\r\n- [ ] Log retention per compliance\r\n\r\n---\r\n\r\n## üöÄ Operations\r\n\r\n### Tenant Lifecycle\r\n- [ ] Tenant provisioning automated\r\n- [ ] Tenant suspension (no data loss)\r\n- [ ] Tenant reactivation\r\n- [ ] Tenant deletion (GDPR right to erasure)\r\n- [ ] Tenant data export\r\n\r\n### Maintenance\r\n- [ ] Migrations tested across tenants\r\n- [ ] Per-tenant maintenance possible\r\n- [ ] Tenant-specific feature toggles\r\n- [ ] Canary deployments per tenant\r\n\r\n---\r\n\r\n## ‚úÖ Review Summary\r\n\r\n| Category | Status | Notes |\r\n|----------|--------|-------|\r\n| Architecture | [ ] | |\r\n| Tenant Resolution | [ ] | |\r\n| Data Isolation | [ ] | |\r\n| Context Propagation | [ ] | |\r\n| Authorization | [ ] | |\r\n| Security | [ ] | |\r\n| Billing | [ ] | |\r\n| Testing | [ ] | |\r\n| Monitoring | [ ] | |\r\n\r\n---\r\n\r\n## Sign-Off\r\n\r\n| Role | Name | Date |\r\n|------|------|------|\r\n| Security Review | | |\r\n| Architecture Review | | |\r\n| Development Lead | | |\r\n\r\n---\r\n\r\n## Sources\r\n\r\n- [Microsoft Azure Multi-Tenant Guide](https://docs.microsoft.com/en-us/azure/architecture/guide/multitenant/)\r\n- [AWS Multi-Tenant SaaS](https://aws.amazon.com/blogs/apn/building-multi-tenant-saas-applications-on-aws/)\r\n- [PostgreSQL Row Level Security](https://www.postgresql.org/docs/current/ddl-rowsecurity.html)\r\n- [SaaS Tenant Isolation Strategies](https://d1.awsstatic.com/whitepapers/saas-tenant-isolation-strategies.pdf)\r\n- [Stripe Multi-Tenant Best Practices](https://stripe.com/docs/connect/best-practices)\r\n"
  },
  {
    "id": "checklist-prod-readiness",
    "title": "Production Readiness Checklist",
    "tags": [
      "production",
      "deployment",
      "readiness",
      "launch",
      "sre"
    ],
    "level": "intermediate",
    "stacks": [
      "all"
    ],
    "scope": "deployment",
    "maturity": "stable",
    "works_with": [
      "all"
    ],
    "path": "D:/Code/backend-engineering-kit/.shared/production-backend-kit/checklists/checklist.prod-readiness.md",
    "type": "checklist",
    "sections": [],
    "checklist": [],
    "sources": [],
    "rawContent": "\r\n# Production Readiness Checklist\r\n\r\nComplete this checklist before any production deployment. Each section must be reviewed and signed off.\r\n\r\n---\r\n\r\n## üîß Configuration & Environment\r\n\r\n### Configuration Management\r\n- [ ] All configs externalized (not hardcoded)\r\n- [ ] Environment-specific configs (dev/staging/prod)\r\n- [ ] Config validation on startup (fail fast)\r\n- [ ] Feature flags for risky changes\r\n- [ ] Config changes don't require redeploy\r\n\r\n### Secrets Management\r\n- [ ] Secrets in secret manager (Vault, AWS Secrets Manager)\r\n- [ ] No secrets in environment variables (use injection)\r\n- [ ] No secrets in git history (run git-secrets scan)\r\n- [ ] Secrets rotation procedure documented\r\n- [ ] Different secrets per environment\r\n\r\n### Environment Setup\r\n- [ ] Environment parity (staging ‚âà production)\r\n- [ ] All TODO/FIXME comments resolved\r\n- [ ] Debug logging disabled in production\r\n- [ ] Verbose error messages disabled\r\n\r\n---\r\n\r\n## üß™ Testing & Quality\r\n\r\n### Unit & Integration Testing\r\n- [ ] Unit test coverage > 70%\r\n- [ ] Critical paths have integration tests\r\n- [ ] Tests run in CI on every commit\r\n- [ ] No flaky tests in suite\r\n- [ ] Test data is isolated (not shared)\r\n\r\n### Performance & Load Testing\r\n- [ ] Load test completed at 2x expected traffic\r\n- [ ] P95/P99 latency within SLO targets\r\n- [ ] Memory leak testing (12+ hour runs)\r\n- [ ] Concurrent user limit determined\r\n\r\n### Security Testing\r\n- [ ] SAST (Static Analysis) run - no critical findings\r\n- [ ] DAST (Dynamic Analysis) run - no critical findings\r\n- [ ] Dependency vulnerability scan (Snyk, Dependabot)\r\n- [ ] OWASP Top 10 review completed\r\n- [ ] Penetration test (if applicable)\r\n\r\n---\r\n\r\n## üìä Observability (Logs, Metrics, Traces)\r\n\r\n### Logging\r\n- [ ] Structured logging (JSON format)\r\n- [ ] Correlation/trace ID in all logs\r\n- [ ] Log levels appropriate (no DEBUG in prod)\r\n- [ ] PII/sensitive data redacted from logs\r\n- [ ] Log aggregation configured (ELK, CloudWatch)\r\n\r\n### Metrics\r\n- [ ] RED metrics exposed (Rate, Errors, Duration)\r\n- [ ] USE metrics for resources (Utilization, Saturation, Errors)\r\n- [ ] Business metrics instrumented\r\n- [ ] Prometheus/StatsD endpoint configured\r\n- [ ] Dashboards created and tested\r\n\r\n### Tracing\r\n- [ ] Distributed tracing enabled (OpenTelemetry, Jaeger)\r\n- [ ] Trace context propagated across services\r\n- [ ] Sampling rate appropriate for traffic\r\n- [ ] Critical paths have trace coverage\r\n\r\n### Alerting\r\n- [ ] Alerts defined for SLO violations\r\n- [ ] Alert thresholds tuned (not too noisy)\r\n- [ ] PagerDuty/OpsGenie integration\r\n- [ ] Alert runbooks linked to alerts\r\n- [ ] Alert fatigue reviewed\r\n\r\n---\r\n\r\n## üîí Security\r\n\r\n### Authentication & Authorization\r\n- [ ] Auth mechanism reviewed (JWT, OAuth)\r\n- [ ] Token expiration configured\r\n- [ ] Session management secure\r\n- [ ] RBAC/permissions tested\r\n- [ ] API authentication required for all endpoints\r\n\r\n### Data Protection\r\n- [ ] Data encrypted at rest (AES-256)\r\n- [ ] Data encrypted in transit (TLS 1.2+)\r\n- [ ] PII handling compliant (GDPR, CCPA)\r\n- [ ] Data retention policy implemented\r\n- [ ] Backup encryption verified\r\n\r\n### Infrastructure Security\r\n- [ ] TLS certificates valid (auto-renewal)\r\n- [ ] Security groups/firewall rules minimal\r\n- [ ] No public access to databases\r\n- [ ] SSH keys rotated/managed\r\n- [ ] Container images scanned\r\n\r\n### Input Validation\r\n- [ ] All inputs validated (body, params, query)\r\n- [ ] SQL injection prevented (parameterized queries)\r\n- [ ] XSS prevented (output encoding)\r\n- [ ] CSRF protection enabled\r\n- [ ] Rate limiting configured\r\n\r\n---\r\n\r\n## üöÄ Deployment & Reliability\r\n\r\n### Deployment Strategy\r\n- [ ] Zero-downtime deployment configured\r\n- [ ] Blue-green or canary deployment ready\r\n- [ ] Rollback procedure documented and tested\r\n- [ ] Database migrations backward compatible\r\n- [ ] Feature flags for gradual rollout\r\n\r\n### Health Checks\r\n- [ ] `/health/live` endpoint (liveness)\r\n- [ ] `/health/ready` endpoint (readiness)\r\n- [ ] `/health/startup` for slow init (if needed)\r\n- [ ] Health checks verify dependencies\r\n- [ ] Kubernetes probes configured\r\n\r\n### Resilience\r\n- [ ] Circuit breakers for external calls\r\n- [ ] Retry logic with exponential backoff\r\n- [ ] Timeouts configured for all I/O\r\n- [ ] Graceful shutdown implemented\r\n- [ ] Connection pooling configured\r\n\r\n### Capacity\r\n- [ ] Auto-scaling configured and tested\r\n- [ ] Resource limits set (CPU, memory)\r\n- [ ] Connection pool sizes appropriate\r\n- [ ] Queue sizes and backpressure configured\r\n- [ ] Database connection limits known\r\n\r\n---\r\n\r\n## üìã Documentation & Operations\r\n\r\n### Documentation\r\n- [ ] API documentation up-to-date (OpenAPI)\r\n- [ ] README with setup instructions\r\n- [ ] Architecture diagram current\r\n- [ ] Deployment procedure documented\r\n- [ ] Environment variables documented\r\n\r\n### Runbooks & Incident Response\r\n- [ ] Runbook for common issues\r\n- [ ] Incident response procedure defined\r\n- [ ] On-call escalation path clear\r\n- [ ] Post-mortem template ready\r\n- [ ] Service owner identified\r\n\r\n### Dependency Management\r\n- [ ] All dependencies pinned (exact versions)\r\n- [ ] License compliance verified\r\n- [ ] Upgrade path for dependencies known\r\n- [ ] Deprecated dependencies identified\r\n- [ ] Third-party SLAs reviewed\r\n\r\n---\r\n\r\n## ‚úÖ Final Sign-Off\r\n\r\n| Role | Name | Date | Signature |\r\n|------|------|------|-----------|\r\n| Engineering Lead | | | |\r\n| Security Review | | | |\r\n| SRE/Operations | | | |\r\n| Product Owner | | | |\r\n\r\n---\r\n\r\n## Quick Reference: The Twelve-Factor App\r\n\r\n| Factor | Description | ‚úì |\r\n|--------|-------------|---|\r\n| 1. Codebase | One codebase, many deploys | [ ] |\r\n| 2. Dependencies | Explicitly declare and isolate | [ ] |\r\n| 3. Config | Store config in environment | [ ] |\r\n| 4. Backing Services | Treat as attached resources | [ ] |\r\n| 5. Build/Release/Run | Strictly separate stages | [ ] |\r\n| 6. Processes | Execute as stateless processes | [ ] |\r\n| 7. Port Binding | Export services via port | [ ] |\r\n| 8. Concurrency | Scale out via process model | [ ] |\r\n| 9. Disposability | Fast startup, graceful shutdown | [ ] |\r\n| 10. Dev/Prod Parity | Keep environments similar | [ ] |\r\n| 11. Logs | Treat as event streams | [ ] |\r\n| 12. Admin Processes | Run as one-off processes | [ ] |\r\n\r\n---\r\n\r\n## Sources\r\n\r\n- [Google SRE - Production Readiness Review](https://sre.google/sre-book/evolving-sre-engagement-model/)\r\n- [The Twelve-Factor App](https://12factor.net/)\r\n- [AWS Well-Architected Framework](https://aws.amazon.com/architecture/well-architected/)\r\n- [Microsoft DevOps Checklist](https://learn.microsoft.com/en-us/azure/architecture/checklist/dev-ops)\r\n- [OWASP Security Checklist](https://owasp.org/www-project-web-security-testing-guide/)\r\n"
  },
  {
    "id": "checklist-reliability-review",
    "title": "Reliability Review Checklist",
    "tags": [
      "reliability",
      "resilience",
      "sre",
      "review",
      "fault-tolerance"
    ],
    "level": "advanced",
    "stacks": [
      "all"
    ],
    "scope": "reliability",
    "maturity": "stable",
    "works_with": [
      "all"
    ],
    "path": "D:/Code/backend-engineering-kit/.shared/production-backend-kit/checklists/checklist.reliability-review.md",
    "type": "checklist",
    "sections": [],
    "checklist": [],
    "sources": [],
    "rawContent": "\r\n# Reliability Review Checklist\r\n\r\nUse this checklist to assess system reliability before production deployment.\r\n\r\n---\r\n\r\n## ‚è±Ô∏è Timeouts\r\n\r\n### Connection Timeouts\r\n- [ ] Connection timeout configured for all external HTTP calls\r\n- [ ] Database connection timeout set\r\n- [ ] Redis/cache connection timeout set\r\n- [ ] Message broker connection timeout set\r\n- [ ] Default: 1-5s for connection, longer for read\r\n\r\n### Request/Operation Timeouts\r\n- [ ] Read/request timeout configured for HTTP calls\r\n- [ ] Database query timeout configured\r\n- [ ] Overall transaction timeout defined\r\n- [ ] Async operation timeouts (Future/Promise)\r\n\r\n### Timeout Hierarchy\r\n- [ ] Inner timeouts shorter than outer timeouts\r\n- [ ] Gateway timeout > service timeout > database timeout\r\n- [ ] Client timeout > server timeout (avoid orphaned requests)\r\n- [ ] Timeouts documented and justified\r\n\r\n### Timeout Values Reference\r\n| Operation | Typical Range |\r\n|-----------|---------------|\r\n| Connection | 1-5s |\r\n| API call (internal) | 1-10s |\r\n| API call (external) | 5-30s |\r\n| Database query | 5-30s |\r\n| Batch operation | 30s-5min |\r\n| Background job | 1min-1hr |\r\n\r\n---\r\n\r\n## üîÑ Retry Strategy\r\n\r\n### Basic Configuration\r\n- [ ] Retry enabled only for transient errors (5xx, network)\r\n- [ ] Retry disabled for client errors (4xx)\r\n- [ ] Maximum retry count defined (typically 3-5)\r\n- [ ] Total retry duration bounded (budget approach)\r\n\r\n### Exponential Backoff\r\n- [ ] Exponential backoff implemented (not fixed delay)\r\n- [ ] Jitter added to prevent thundering herd\r\n- [ ] Base delay appropriate (100ms - 1s)\r\n- [ ] Max delay capped (30s - 60s typical)\r\n\r\n### Idempotency for Retries\r\n- [ ] Write operations use idempotency keys\r\n- [ ] Retry-safe operations identified\r\n- [ ] Non-idempotent operations have guards\r\n\r\n```\r\n// Recommended backoff formula\r\ndelay = min(maxDelay, baseDelay * 2^attempt + randomJitter)\r\n```\r\n\r\n---\r\n\r\n## üîå Circuit Breakers\r\n\r\n### Configuration\r\n- [ ] Circuit breaker for all external dependencies\r\n- [ ] Failure threshold defined (e.g., 50% in 10s window)\r\n- [ ] Minimum request count before tripping (e.g., 10)\r\n- [ ] Open duration appropriate (15-60s typical)\r\n\r\n### States & Transitions\r\n- [ ] CLOSED ‚Üí OPEN on threshold breach\r\n- [ ] OPEN ‚Üí HALF-OPEN after timeout\r\n- [ ] HALF-OPEN ‚Üí CLOSED on success probe\r\n- [ ] HALF-OPEN ‚Üí OPEN on probe failure\r\n\r\n### Recovery\r\n- [ ] Half-open probe requests limited (1-3)\r\n- [ ] Gradual traffic increase after recovery\r\n- [ ] Fallback response when circuit open\r\n- [ ] Fallback distinguishable from real response\r\n\r\n### Observability\r\n- [ ] Circuit state exposed in metrics\r\n- [ ] Circuit state changes logged\r\n- [ ] Dashboard shows circuit health\r\n- [ ] Alerts on prolonged open state\r\n\r\n---\r\n\r\n## üì® Messaging & Async Processing\r\n\r\n### Dead Letter Queue (DLQ)\r\n- [ ] DLQ configured for every queue\r\n- [ ] Failed messages retain original context\r\n- [ ] DLQ monitoring and alerting\r\n- [ ] DLQ replay mechanism exists\r\n- [ ] Retention policy for DLQ messages\r\n\r\n### Idempotent Consumers\r\n- [ ] Message processing is idempotent\r\n- [ ] Deduplication key tracked (message ID)\r\n- [ ] Exactly-once semantics where required\r\n- [ ] At-least-once acceptable with idempotency\r\n\r\n### Poison Message Handling\r\n- [ ] Max retry attempts per message (3-5)\r\n- [ ] Messages move to DLQ after max retries\r\n- [ ] Bad message doesn't block queue\r\n- [ ] Message schema validation at entry\r\n\r\n### Ordering & Delivery\r\n- [ ] Ordering preserved where required (partition key)\r\n- [ ] Out-of-order handling for eventual consistency\r\n- [ ] Duplicate delivery handling\r\n- [ ] Message TTL configured\r\n\r\n### Queue Health\r\n- [ ] Queue depth monitored (messages pending)\r\n- [ ] Consumer lag monitored\r\n- [ ] Alert on growing backlog\r\n- [ ] Auto-scaling based on queue depth\r\n\r\n---\r\n\r\n## üõ°Ô∏è Graceful Degradation\r\n\r\n### Feature Toggles\r\n- [ ] Non-critical features can be disabled\r\n- [ ] Kill switches for expensive operations\r\n- [ ] Feature flags externally configurable\r\n- [ ] No deploy needed to toggle\r\n\r\n### Caching Fallback\r\n- [ ] Stale cache served when source unavailable\r\n- [ ] Cache-aside pattern with TTL\r\n- [ ] Cache stampede prevention (locking)\r\n- [ ] Local cache as backup for remote cache\r\n\r\n### Load Shedding\r\n- [ ] Request prioritization implemented\r\n- [ ] Low-priority requests shed under load\r\n- [ ] Client-provided priority respected\r\n- [ ] Shedding threshold configured\r\n\r\n### Bulkhead Pattern\r\n- [ ] Resource pools isolated per dependency\r\n- [ ] Failure in one dependency doesn't exhaust shared resources\r\n- [ ] Thread pools / connection pools separated\r\n- [ ] Semaphore limits for concurrent operations\r\n\r\n---\r\n\r\n## ‚ù§Ô∏è Health Checks\r\n\r\n### Liveness Probe\r\n- [ ] `/health/live` endpoint exists\r\n- [ ] Returns 200 if process is alive\r\n- [ ] Minimal logic (no dependency checks)\r\n- [ ] Fails only when restart would help\r\n\r\n### Readiness Probe\r\n- [ ] `/health/ready` endpoint exists\r\n- [ ] Checks critical dependencies (DB, cache)\r\n- [ ] Returns 503 when not ready for traffic\r\n- [ ] Timeout-protected dependency checks\r\n\r\n### Startup Probe (if slow startup)\r\n- [ ] `/health/startup` endpoint exists\r\n- [ ] Allows longer initial startup time\r\n- [ ] Prevents premature liveness failures\r\n\r\n### Kubernetes Configuration\r\n- [ ] `initialDelaySeconds` appropriate\r\n- [ ] `periodSeconds` not too aggressive\r\n- [ ] `failureThreshold` allows transient failures\r\n- [ ] `timeoutSeconds` less than `periodSeconds`\r\n\r\n---\r\n\r\n## üîÑ Graceful Shutdown\r\n\r\n### Signal Handling\r\n- [ ] SIGTERM handled (not SIGKILL)\r\n- [ ] Graceful shutdown period defined (15-30s)\r\n- [ ] In-flight requests allowed to complete\r\n- [ ] New requests rejected during shutdown\r\n\r\n### Resource Cleanup\r\n- [ ] Database connections drained\r\n- [ ] Message consumer stopped (no new messages)\r\n- [ ] Background jobs completed or checkpointed\r\n- [ ] Cron jobs paused\r\n\r\n### Kubernetes Integration\r\n- [ ] `preStop` hook if needed (sleep for load balancer)\r\n- [ ] `terminationGracePeriodSeconds` matches app needs\r\n- [ ] Readiness probe fails during shutdown\r\n\r\n```yaml\r\n# Kubernetes example\r\nlifecycle:\r\n  preStop:\r\n    exec:\r\n      command: [\"/bin/sh\", \"-c\", \"sleep 5\"]\r\nterminationGracePeriodSeconds: 30\r\n```\r\n\r\n---\r\n\r\n## üìä Capacity Planning\r\n\r\n### Auto-Scaling\r\n- [ ] Horizontal auto-scaling configured\r\n- [ ] Scale-up trigger appropriate (70-80% CPU/memory)\r\n- [ ] Scale-down delay prevents flapping\r\n- [ ] Min/max instances defined\r\n- [ ] Scale-out tested under load\r\n\r\n### Resource Limits\r\n- [ ] CPU request and limit set\r\n- [ ] Memory request and limit set\r\n- [ ] OOM behavior acceptable (restart vs OOMKilled)\r\n- [ ] Disk/storage limits if applicable\r\n\r\n### Connection Pools\r\n- [ ] Database pool size calculated\r\n  - Formula: `connections = ((core_count * 2) + effective_spindle_count)`\r\n- [ ] HTTP client pool size appropriate\r\n- [ ] Pool exhaustion handled gracefully\r\n- [ ] Pool metrics exposed\r\n\r\n### Load Testing\r\n- [ ] Load tested at expected peak traffic\r\n- [ ] Tested at 2x expected peak\r\n- [ ] Failure mode under overload documented\r\n- [ ] Recovery after overload verified\r\n\r\n---\r\n\r\n## üîÑ Consistency & Data\r\n\r\n### Eventual Consistency\r\n- [ ] Inconsistency windows documented\r\n- [ ] Reconciliation process exists\r\n- [ ] Client UX handles lag gracefully\r\n\r\n### Outbox Pattern (if applicable)\r\n- [ ] Messages written transactionally with data\r\n- [ ] Relay process publishes from outbox\r\n- [ ] At-least-once delivery guaranteed\r\n- [ ] Duplicate handling at consumer\r\n\r\n### Saga Pattern (if distributed)\r\n- [ ] Compensating transactions defined\r\n- [ ] Saga state persisted\r\n- [ ] Partial failure recovery documented\r\n\r\n---\r\n\r\n## ‚úÖ Reliability Summary\r\n\r\n| Category | Status | Notes |\r\n|----------|--------|-------|\r\n| Timeouts | [ ] | |\r\n| Retries | [ ] | |\r\n| Circuit Breakers | [ ] | |\r\n| DLQ/Messaging | [ ] | |\r\n| Graceful Degradation | [ ] | |\r\n| Health Checks | [ ] | |\r\n| Graceful Shutdown | [ ] | |\r\n| Capacity/Scaling | [ ] | |\r\n\r\n---\r\n\r\n## Sign-Off\r\n\r\n| Role | Name | Date |\r\n|------|------|------|\r\n| SRE/Operations | | |\r\n| Development Lead | | |\r\n\r\n---\r\n\r\n## Sources\r\n\r\n- [Google SRE Book](https://sre.google/sre-book/table-of-contents/)\r\n- [AWS Well-Architected - Reliability Pillar](https://docs.aws.amazon.com/wellarchitected/latest/reliability-pillar/)\r\n- [Release It! 2nd Edition (Nygard)](https://pragprog.com/titles/mnee2/release-it-second-edition/)\r\n- [Microsoft Azure - Resiliency Checklist](https://learn.microsoft.com/en-us/azure/architecture/framework/resiliency/)\r\n- [Martin Fowler - Circuit Breaker](https://martinfowler.com/bliki/CircuitBreaker.html)\r\n- [Netflix - Hystrix](https://github.com/Netflix/Hystrix/wiki)\r\n"
  },
  {
    "id": "checklist-security-review",
    "title": "Security Review Checklist",
    "tags": [
      "security",
      "owasp",
      "review",
      "vulnerabilities",
      "appsec"
    ],
    "level": "intermediate",
    "stacks": [
      "all"
    ],
    "scope": "security",
    "maturity": "stable",
    "works_with": [
      "all"
    ],
    "path": "D:/Code/backend-engineering-kit/.shared/production-backend-kit/checklists/checklist.security-review.md",
    "type": "checklist",
    "sections": [],
    "checklist": [],
    "sources": [],
    "rawContent": "\r\n# Security Review Checklist\r\n\r\nUse this checklist for security review before deploying to production.\r\n\r\n---\r\n\r\n## üîê Authentication (OWASP A07)\r\n\r\n### Password Security\r\n- [ ] Passwords hashed with Argon2id (preferred) or bcrypt\r\n- [ ] Cost factor appropriate (bcrypt ‚â• 12, Argon2 tuned)\r\n- [ ] No MD5/SHA1/SHA256 for password hashing\r\n- [ ] Password requirements enforced (length ‚â• 8, no common passwords)\r\n- [ ] Password breach check (HaveIBeenPwned API or similar)\r\n\r\n### Session Management\r\n- [ ] Session tokens cryptographically random (256-bit entropy)\r\n- [ ] Session ID rotated after login\r\n- [ ] Session timeout configured (idle + absolute)\r\n- [ ] Secure, HttpOnly, SameSite flags on cookies\r\n- [ ] Session invalidation on logout (server-side)\r\n\r\n### JWT Security\r\n- [ ] Algorithm explicitly validated (no \"none\" accepted)\r\n- [ ] Signature verified before trusting claims\r\n- [ ] Expiration (exp) claim enforced\r\n- [ ] Issuer (iss) and Audience (aud) validated\r\n- [ ] Short-lived access tokens (< 15 mins)\r\n- [ ] Refresh token rotation implemented\r\n- [ ] JWTs not stored in localStorage (use httpOnly cookies)\r\n\r\n### Multi-Factor Authentication\r\n- [ ] MFA available for sensitive accounts\r\n- [ ] TOTP implementation follows RFC 6238\r\n- [ ] Backup codes provided (hashed storage)\r\n- [ ] MFA bypass protection (social engineering)\r\n\r\n### Account Protection\r\n- [ ] Account lockout after failed attempts (5-10)\r\n- [ ] Progressive delays on failed login\r\n- [ ] Lockout notification to user\r\n- [ ] CAPTCHA after suspicious activity\r\n- [ ] Credential stuffing protection\r\n\r\n---\r\n\r\n## üõ°Ô∏è Authorization (OWASP A01, A04)\r\n\r\n### Access Control\r\n- [ ] All access controls enforced server-side\r\n- [ ] Default deny (explicit allow required)\r\n- [ ] Principle of least privilege applied\r\n- [ ] Resource-level permissions checked\r\n\r\n### IDOR Prevention (Insecure Direct Object Reference)\r\n- [ ] Every object access validated against user context\r\n- [ ] UUIDs preferred over sequential IDs (defense in depth)\r\n- [ ] Horizontal privilege escalation tested\r\n- [ ] Vertical privilege escalation tested\r\n\r\n### Role-Based Access Control\r\n- [ ] Roles defined with minimal permissions\r\n- [ ] Admin functions require extra verification (step-up auth)\r\n- [ ] Role changes require re-authentication\r\n- [ ] Sensitive operations have audit trail\r\n\r\n### Function Level Security\r\n- [ ] Admin endpoints protected (not just hidden)\r\n- [ ] API versioning doesn't expose old auth\r\n- [ ] Mass assignment/over-posting prevented\r\n- [ ] Indirect reference maps for sensitive resources\r\n\r\n---\r\n\r\n## üíâ Injection Prevention (OWASP A03)\r\n\r\n### SQL Injection\r\n- [ ] All SQL uses parameterized queries/prepared statements\r\n- [ ] ORM configured safely (no raw queries without params)\r\n- [ ] Dynamic table/column names validated against allowlist\r\n- [ ] Stored procedures use parameterized inputs\r\n- [ ] Database user has minimal permissions\r\n\r\n### NoSQL Injection\r\n- [ ] Query operators sanitized ($where, $regex blocked)\r\n- [ ] Object IDs validated\r\n- [ ] Aggregation pipeline inputs sanitized\r\n\r\n### Command Injection\r\n- [ ] No shell execution with user input\r\n- [ ] If required: strict allowlist validation\r\n- [ ] subprocess called without shell=True\r\n- [ ] Arguments passed as array, not string\r\n\r\n### XSS (Cross-Site Scripting)\r\n- [ ] Output encoding for context (HTML, JS, URL, CSS)\r\n- [ ] Content Security Policy (CSP) header configured\r\n- [ ] Modern framework auto-escaping enabled\r\n- [ ] User input in URLs validated\r\n- [ ] DOM-based XSS reviewed\r\n\r\n### Template Injection\r\n- [ ] User input never in template expressions\r\n- [ ] Template engine sandboxed\r\n- [ ] SSTI (Server-Side Template Injection) tested\r\n\r\n### Other Injection\r\n- [ ] LDAP injection prevented (if applicable)\r\n- [ ] XML injection/XXE prevented (if applicable)\r\n- [ ] Path traversal prevented (canonicalize, validate)\r\n- [ ] HTTP header injection prevented\r\n- [ ] Email header injection prevented\r\n\r\n---\r\n\r\n## üîë Sensitive Data (OWASP A02)\r\n\r\n### Secrets Management\r\n- [ ] No secrets in source code (git-secrets scan)\r\n- [ ] No secrets in logs (grep test)\r\n- [ ] Secrets in vault/secret manager\r\n- [ ] Different secrets per environment\r\n- [ ] Secrets rotation procedure exists\r\n\r\n### Data at Rest\r\n- [ ] Database encrypted (TDE or application-level)\r\n- [ ] Backups encrypted\r\n- [ ] Encryption keys properly managed (not with data)\r\n- [ ] Sensitive columns encrypted (PII, financial)\r\n\r\n### Data in Transit\r\n- [ ] TLS 1.2+ enforced (no TLS 1.0/1.1)\r\n- [ ] Strong cipher suites only\r\n- [ ] Certificate validation enabled\r\n- [ ] Internal service communication encrypted\r\n\r\n### PII & Privacy\r\n- [ ] PII identified and classified\r\n- [ ] Data minimization applied (only collect needed)\r\n- [ ] Retention policy implemented\r\n- [ ] Right to deletion/export implemented (GDPR)\r\n- [ ] Consent management in place\r\n\r\n### Error Handling\r\n- [ ] Error messages don't leak stack traces\r\n- [ ] Error messages don't leak SQL/query info\r\n- [ ] Different errors for \"not found\" vs \"forbidden\"\r\n- [ ] Generic \"invalid credentials\" (no user enumeration)\r\n\r\n---\r\n\r\n## üåê HTTP Security Headers\r\n\r\n### Essential Headers\r\n- [ ] `Strict-Transport-Security: max-age=31536000; includeSubDomains`\r\n- [ ] `Content-Security-Policy` configured (strict)\r\n- [ ] `X-Content-Type-Options: nosniff`\r\n- [ ] `X-Frame-Options: DENY` or CSP frame-ancestors\r\n- [ ] `X-XSS-Protection: 0` (CSP is better)\r\n- [ ] `Referrer-Policy: strict-origin-when-cross-origin`\r\n- [ ] `Permissions-Policy` (formerly Feature-Policy)\r\n\r\n### CORS Configuration\r\n- [ ] `Access-Control-Allow-Origin` not wildcard (*) with credentials\r\n- [ ] Allowed origins explicitly listed\r\n- [ ] Methods and headers restricted to needed\r\n- [ ] Preflight requests handled correctly\r\n\r\n---\r\n\r\n## ‚ö° API Security\r\n\r\n### Rate Limiting\r\n- [ ] Rate limiting on all endpoints\r\n- [ ] Stricter limits on auth endpoints\r\n- [ ] Rate limit by user AND IP\r\n- [ ] Informative rate limit headers (X-RateLimit-*)\r\n- [ ] Graceful degradation under load\r\n\r\n### Input Validation\r\n- [ ] Schema validation (JSON Schema, Zod, etc.)\r\n- [ ] Size limits on all inputs\r\n- [ ] File upload restrictions (type, size)\r\n- [ ] Encoding normalized (UTF-8)\r\n- [ ] Recursive/nested depth limited\r\n\r\n### API Design Security\r\n- [ ] No sensitive data in URLs (logged!)\r\n- [ ] Pagination limits enforced\r\n- [ ] GraphQL complexity limits (if applicable)\r\n- [ ] Batch/bulk limits enforced\r\n- [ ] Debug endpoints disabled in production\r\n\r\n---\r\n\r\n## üîÑ Security Operations\r\n\r\n### Logging & Monitoring\r\n- [ ] Authentication events logged\r\n- [ ] Authorization failures logged\r\n- [ ] Sensitive operations logged (audit trail)\r\n- [ ] Log integrity protected (append-only, centralized)\r\n- [ ] Security alerts configured\r\n\r\n### Dependency Management\r\n- [ ] Dependencies scanned (Snyk, Dependabot, npm audit)\r\n- [ ] No critical vulnerabilities in dependencies\r\n- [ ] Automatic security updates enabled\r\n- [ ] Transitive dependencies reviewed\r\n\r\n### Security Testing\r\n- [ ] SAST (Static Analysis) in CI\r\n- [ ] DAST (Dynamic Analysis) scheduled\r\n- [ ] SCA (Software Composition Analysis) enabled\r\n- [ ] Secret scanning in repositories\r\n- [ ] Penetration testing (annual minimum)\r\n\r\n---\r\n\r\n## ‚úÖ OWASP Top 10 (2021) Quick Check\r\n\r\n| # | Risk | Mitigated | Notes |\r\n|---|------|-----------|-------|\r\n| A01 | Broken Access Control | [ ] | |\r\n| A02 | Cryptographic Failures | [ ] | |\r\n| A03 | Injection | [ ] | |\r\n| A04 | Insecure Design | [ ] | |\r\n| A05 | Security Misconfiguration | [ ] | |\r\n| A06 | Vulnerable Components | [ ] | |\r\n| A07 | Auth Failures | [ ] | |\r\n| A08 | Integrity Failures | [ ] | |\r\n| A09 | Logging Failures | [ ] | |\r\n| A10 | SSRF | [ ] | |\r\n\r\n---\r\n\r\n## Sign-Off\r\n\r\n| Role | Name | Date | Findings |\r\n|------|------|------|----------|\r\n| Security Engineer | | | |\r\n| Development Lead | | | |\r\n| CISO (if required) | | | |\r\n\r\n---\r\n\r\n## Sources\r\n\r\n- [OWASP Top 10 (2021)](https://owasp.org/www-project-top-ten/)\r\n- [OWASP Cheat Sheet Series](https://cheatsheetseries.owasp.org/)\r\n- [OWASP ASVS (Application Security Verification Standard)](https://owasp.org/www-project-application-security-verification-standard/)\r\n- [CWE Top 25 Most Dangerous Software Weaknesses](https://cwe.mitre.org/top25/)\r\n- [NIST Cybersecurity Framework](https://www.nist.gov/cyberframework)\r\n- [SANS Top 25](https://www.sans.org/top25-software-errors/)\r\n"
  }
]